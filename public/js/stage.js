!function e(t,n,a){function o(i,u){if(!n[i]){if(!t[i]){var d="function"==typeof require&&require;if(!u&&d)return d(i,!0);if(r)return r(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)o(a[i]);return o}({1:[function(e,t,n){"use strict";e("./stage")},{"./stage":9}],2:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=i(e),n=r();t.translate(0,-.1,0);var a=new THREE.Mesh(t,n);return a.receiveShadow=!0,a}function r(){return new THREE.MeshPhongMaterial({side:THREE.DoubleSide,map:l,bumpMap:l})}function i(e){var t=e.geometry.boundingBox,n=t.max.x-t.min.x,a=t.max.z-t.min.z,o=new THREE.PlaneGeometry(n,a);return o.rotateX(-Math.PI/2),o}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var u=e("./loadTexture"),d=a(u),s=e("./setTextureRepeat"),c=a(s),f="/textures/ground/1.png",l=(0,c["default"])((0,d["default"])(f),10)},{"./loadTexture":7,"./setTextureRepeat":8}],3:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n={};n.id=e,n.path=M+n.id+".json",$.getJSON(n.path).then(function(e){var n=c(e),a=u(n),o=s(a),r=d(n),i=s(r);o.computeBoundingBox();var f=(o.boundingBox.max.x+o.boundingBox.min.x)/2,l=(o.boundingBox.max.z+o.boundingBox.min.z)/2;o.translate(-f,0,-l),i.translate(-f,v+.1,-l);var E=new THREE.Mesh(o,m);E.castShadow=!0,E.receiveShadow=!0;var h=new THREE.Mesh(i,R);t(E,h)},function(){console.error("Failed to load: "+n.path),t()})}function r(){return new THREE.MeshPhongMaterial({color:16777215,map:T,bumpMap:T})}function i(){return new THREE.MeshStandardMaterial({color:16777215,roughness:.15,metalness:.6})}function u(e){var t=[],n=void 0,a=!0,o=!1,r=void 0;try{for(var i,u=e[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var d=i.value;n=new THREE.ExtrudeGeometry(d,{amount:v,bevelThickness:0,bevelSize:0,bevelSegments:0,bevelEnabled:!1,curveSegments:0,steps:1}),n.rotateX(-Math.PI/2),t.push(n)}}catch(s){o=!0,r=s}finally{try{!a&&u["return"]&&u["return"]()}finally{if(o)throw r}}return t}function d(e){var t=[],n=void 0,a=!0,o=!1,r=void 0;try{for(var i,u=e[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var d=i.value;n=new THREE.ShapeGeometry(d),n.rotateX(-Math.PI/2),t.push(n)}}catch(s){o=!0,r=s}finally{try{!a&&u["return"]&&u["return"]()}finally{if(o)throw r}}return t}function s(e){var t=new THREE.Geometry;return e.forEach(function(e){return t.mergeMesh(new THREE.Mesh(e))}),t}function c(e){var t=void 0,n=void 0,a=void 0,o=[],r=void 0,i=void 0,u=!0,d=!1,s=void 0;try{for(var c,l=e.features[Symbol.iterator]();!(u=(c=l.next()).done);u=!0){for(t=c.value,n=t.geometry.coordinates,a=0;a<n.length;a++)i=f(n[a]),0===a?r=new THREE.Shape(i):r.holes.push(new THREE.Path(i));o.push(r)}}catch(E){d=!0,s=E}finally{try{!u&&l["return"]&&l["return"]()}finally{if(d)throw s}}return o}function f(e){return e.map(function(e){return new THREE.Vector2(e[0],e[1])})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var l=e("./loadTexture"),E=a(l),h=e("./setTextureRepeat"),p=a(h),v=60,M="/shapes/",w="/textures/object/1.png",T=(0,p["default"])((0,E["default"])(w),1),m=r(),R=i()},{"./loadTexture":7,"./setTextureRepeat":8}],4:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=(0,i["default"])(u+"side.png"),t=(0,i["default"])(u+"top.png"),n=(0,i["default"])(u+"bottom.png"),a=[new THREE.MeshBasicMaterial({side:THREE.BackSide,map:e}),new THREE.MeshBasicMaterial({side:THREE.BackSide,map:e}),new THREE.MeshBasicMaterial({side:THREE.BackSide,map:t}),new THREE.MeshBasicMaterial({side:THREE.BackSide,map:n}),new THREE.MeshBasicMaterial({side:THREE.BackSide,map:e}),new THREE.MeshBasicMaterial({side:THREE.BackSide,map:e})],o=new THREE.MeshFaceMaterial(a),r=new THREE.BoxGeometry(3e3,3e3,3e3),d=new THREE.Mesh(r,o);return d}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o;var r=e("./loadTexture"),i=a(r),u="/textures/skybox/"},{"./loadTexture":7}],5:[function(e,t,n){"use strict";function a(){o.add(r,"sunDirection",0,2*Math.PI),o.add(r,"sunHeight",0,500),o.add(r,"autoRatation")}Object.defineProperty(n,"__esModule",{value:!0});var o=new dat.GUI,r={sunDirection:.97*Math.PI,sunHeight:220,autoRatation:!1};a(),n["default"]={config:r,datGui:o}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.$window=$(window),n.$stage=$("#stage")},{}],7:[function(e,t,n){"use strict";function a(e){return o||(o=new THREE.TextureLoader),o.load(e)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var o=void 0},{}],8:[function(e,t,n){"use strict";function a(e,t){return e.wrapS=e.wrapT=THREE.RepeatWrapping,e.repeat.set(t,t),e}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a},{}],9:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(){r(),i(),u(),(0,T["default"])(H,function(e,t){D=e,b.add(D),b.add(t),G=(0,R["default"])(D),b.add(G)}),d()}function r(){S=new THREE.WebGLRenderer,S.setSize(f(),l()),S.setPixelRatio(S.getPixelRatio()),S.setClearColor(16777215),S.shadowMap.enabled=!0,S.shadowMap.type=THREE.PCFSoftShadowMap,p.$stage.append(S.domElement),b=new THREE.Scene,b.autoUpdate=!1,y=new THREE.PerspectiveCamera(30,E(),1,1e4),y.position.set(j*Math.cos(I),z,j*Math.sin(I)),b.add(y),_=new THREE.TrackballControls(y,p.$stage.get(0)),_.staticMoving=!1,_.maxDistance=1e3,_.minDistance=200}function i(){B=new THREE.DirectionalLight(16777215,.5),B.position.set(O*Math.cos(x["default"].config.sunDirection),x["default"].config.sunHeight,O*Math.sin(x["default"].config.sunDirection)),B.castShadow=!0,B.shadow.camera.top=300,B.shadow.camera.bottom=-300,B.shadow.camera.left=-300,B.shadow.camera.right=300,b.add(B),P=new THREE.AmbientLight(16777215),b.add(P)}function u(){k=(0,M["default"])(),b.add(k)}function d(){p.$window.on("resize",function(){y.aspect=E(),y.updateProjectionMatrix(),S.setSize(f(),l())})}function s(){b.updateMatrixWorld(),S.render(b,y)}function c(){B.position.x=O*Math.cos(x["default"].config.sunDirection),B.position.y=x["default"].config.sunHeight,B.position.z=O*Math.sin(x["default"].config.sunDirection),x["default"].config.autoRatation?(I+=.002,y.position.x=j*Math.cos(I),y.position.z=j*Math.sin(I),y.lookAt(b.position)):_.update(),s(),requestAnimationFrame(c)}function f(){return window.innerWidth}function l(){return window.innerHeight}function E(){return f()/l()}function h(){var e=window.location.pathname;return e.substr(e.lastIndexOf("/")+1)}var p=e("./dom"),v=e("./createSkyBox"),M=a(v),w=e("./createMesh"),T=a(w),m=e("./createGround"),R=a(m),g=e("./datGui"),x=a(g),H=h(),y=void 0,b=void 0,S=void 0,_=void 0,B=void 0,P=void 0,k=void 0,D=void 0,G=void 0,O=200,j=600,z=300,I=Math.PI/2;o(),c()},{"./createGround":2,"./createMesh":3,"./createSkyBox":4,"./datGui":5,"./dom":6}]},{},[1]);